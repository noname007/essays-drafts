---
layout: post
title:  行政服务积分系统设计总结
date:   2021-11-30 19:29:36 +0800
tags:
    - lavanna
---
* 目录
{:toc}

公司限定每月最多领一个公牛插排，果然就有人每月必领一个。虽不能说不合规，也很难说清楚是否是在合理利用规则漏洞。资源总是有限的，为了堵住漏洞只能投入更多的管理成本。

最后，在限量领取策略保留的情况下，增加积分兑换方式。

每个城市每月分别会授予员工不同的积分，3个月后用户积分没用的自动过期。 


![](/assets/lavanna-iter211203.arch-4.drawio.png)

## 从定时跑批开始

一个系统的设计从哪里开始入手比较好呢？拆分业务原语与提炼技术组件


跑批-失效，授予积分

授予积分计算过程

- 遍历开启积分策略的城市

- 计算每一个城市下所有人的授与积分任务

- 拆分Job

  - 分治
    重试、效率
  -
  
- 并发处理
  - 
