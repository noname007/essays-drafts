---
layout: post
title: xml学习笔记2---xml的解析
date: '2014-02-02T07:40:00.000-08:00'
author: yang zhen
tags:
- 总结
- dom
- xml
- 学习
- 笔记
modified_time: '2014-02-02T07:40:43.609-08:00'
blogger_id: tag:blogger.com,1999:blog-398569576837287746.post-467640162933563134
blogger_orig_url: http://hiyzz.blogspot.com/2014/02/xml2-xml.html
---

<br /><br /><h3>&nbsp; &nbsp;<span style="color: red;">目标：</span>根据一个已知的xml获取一件商品的名字。</h3><h3><span style="color: orange;">&nbsp;<span style="font-weight: normal;"> </span></span>&nbsp;<span style="color: red;">总结：</span></h3>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 处理这个问题的流程已写在了php的注释之中。<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; xml学习的过程中要始终把握<span style="color: red;"><b>一切皆节点</b></span>这一原则，空格换行也不例外。<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 根据dom树，根据其节点对应的对象的类型我自己简单的将不同类对象概括为：标签(元素)类型（<span style="color: red;">domElement</span>）、属性类型（<span style="color: red;">domAttribute</span>）、文本节点类型（<span style="color: red;">domeText</span>），和节点列表类型（<span style="color: red;">domnodelist</span>），括号内的红色字体为手册内给出的类，我在此处没有区分大小写。<br />&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 根据手册可以发现，他们有很多的相同的属性方法，继承了domnode类。<span style="color: red;">并且有些节点对象不同的属性，可能有相同的值。不同的对象，相同的属性有相同的值。</span><br /><br /><br /><a name='more'></a><br /><br /><br /><div style="background: #fdfdfd; color: black;"><u>XML语言</u>: <a href="http://fayaa.com/code/">高亮代码由发芽网提供</a></div><div class="source" style="background-color: silver; color: black; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #008800; font-style: italic;">01&nbsp;</span><span style="color: #008800;">&lt;?xml version='1.0' encoding = "utf-8" ?&gt;</span><br /><span style="color: #008800; font-style: italic;">02&nbsp;</span><span style="color: green; font-weight: bold;">&lt;shop&gt;</span><br /><span style="color: #008800; font-style: italic;">03&nbsp;</span> &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;goods</span> <span style="color: #bb4444;">gid=</span><span style="color: #bb4444;">"1"</span><span style="color: green; font-weight: bold;">&gt;</span><br /><span style="color: #008800; font-style: italic;">04&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;name&gt;</span>天龙八部<span style="color: green; font-weight: bold;">&lt;/name&gt;</span><br /><span style="color: #f810b0;">05&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;price&gt;</span>12.3<span style="color: green; font-weight: bold;">&lt;/price&gt;</span><br /><span style="color: #008800; font-style: italic;">06&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;desc&gt;</span> <span style="color: #008800;">&lt;![CDATA[这是一本好书,&gt;10000人在读]]&gt;</span> <span style="color: green; font-weight: bold;">&lt;/desc&gt;</span><br /><span style="color: #008800; font-style: italic;">07&nbsp;</span> &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;/goods&gt;</span><br /><span style="color: #008800; font-style: italic;">08&nbsp;</span> &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;goods</span> <span style="color: #bb4444;">gid=</span><span style="color: #bb4444;">"1"</span><span style="color: green; font-weight: bold;">&gt;</span><br /><span style="color: #008800; font-style: italic;">09&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;name&gt;</span>诺基亚<span style="color: green; font-weight: bold;">&lt;/name&gt;</span><br /><span style="color: #f810b0;">10&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;price&gt;</span>999<span style="color: green; font-weight: bold;">&lt;/price&gt;</span><br /><span style="color: #008800; font-style: italic;">11&nbsp;</span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;desc&gt;</span> <span style="color: #008800;">&lt;![CDATA[这是一部好手机]]&gt;</span> <span style="color: green; font-weight: bold;">&lt;/desc&gt;</span><br /><span style="color: #008800; font-style: italic;">12&nbsp;</span> &nbsp; &nbsp;<span style="color: green; font-weight: bold;">&lt;/goods&gt;</span><br /><span style="color: #008800; font-style: italic;">13&nbsp;</span><span style="color: green; font-weight: bold;">&lt;/shop&gt;</span></div><br /><br /><div style="background: #fdfdfd; color: black;"><u>PHP语言</u>: <a href="http://fayaa.com/code/">高亮代码由发芽网提供</a></div><div class="source" style="background-color: black; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00;">01 </span><span style="color: #409090;">&lt;?php</span><br /><span style="color: #cd8b00;">02 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//获取一件商品名字</span><br /><span style="color: #cd8b00;">03 </span><br /><span style="color: #cd8b00;">04 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//1.创建一个空dom对象并将xml加载到内存中</span><br /><span style="color: #f810b0;">05 </span> &nbsp; &nbsp;<span style="color: #cfbfad;">header</span>(<span style="background-color: #404040; color: #ffcd8b;">"Content-type: text/html; charset=utf-8"</span>);<br /><span style="color: #cd8b00;">06 </span> &nbsp; &nbsp;<span style="color: #ff8bff;">$dom</span><span style="color: #cfbfad;">=</span><span style="color: #808bed;">new</span> <span style="color: #cfbfad;">DOMdocument</span>(<span style="background-color: #404040; color: #ffcd8b;">"1.0"</span><span style="color: #cfbfad;">,</span><span style="background-color: #404040; color: #ffcd8b;">"utf-8"</span>); <span style="color: #cd8b00;">//DOMDocument Object</span><br /><span style="color: #cd8b00;">07 </span> &nbsp; &nbsp;<span style="color: #ff8bff;">$dom</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">load</span>(<span style="background-color: #404040; color: #ffcd8b;">"1.xml"</span>);<br /><span style="color: #cd8b00;">08 </span><br /><span style="color: #cd8b00;">09 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//print_r($dom);</span><br /><span style="color: #f810b0;">10 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//2.获取&lt;name&gt;节点列表 document</span><br /><span style="color: #cd8b00;">11 </span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_name</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$dom</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">getElementsByTagName</span>(<span style="background-color: #404040; color: #ffcd8b;">"name"</span>);<span style="color: #cd8b00;">//DOMNodeList Object</span><br /><span style="color: #cd8b00;">12 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//print_r($goods_name);</span><br /><span style="color: #cd8b00;">13 </span><br /><span style="color: #cd8b00;">14 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//3.从列表元素中得到一件商品的名字</span><br /><span style="color: #f810b0;">15 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//DOMNodeList Object有一个属性一个方法</span><br /><span style="color: #cd8b00;">16 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">/*echo '有'.$goods_name-&gt;length.'件商品&lt;br/&gt;';</span><br /><span style="color: #cd8b00;">17 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;for ($i=0; $i &lt; $goods_name-&gt;length; $i++) {</span><br /><span style="color: #cd8b00;">18 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;echo "&lt;br/&gt;&lt;pre&gt;"; &nbsp; &nbsp;</span><br /><span style="color: #cd8b00;">19 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;print_r($goods_name-&gt;item($i)); // $goods_name-&gt;item($i) &nbsp; DOMElement Object</span><br /><span style="color: #f810b0;">20 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;echo "&lt;/pre&gt;";</span><br /><span style="color: #cd8b00;">21 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;}</span><br /><span style="color: #cd8b00;">22 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;*/</span><br /><span style="color: #cd8b00;">23 </span><br /><span style="color: #cd8b00;">24 </span> &nbsp; &nbsp;<span style="color: #ff8bff;">$temp</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$goods_name</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">item</span>(<span style="color: #506dbd;">0</span>);<br /><span style="color: #f810b0;">25 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// echo "&lt;br/&gt;&lt;pre&gt;";</span><br /><span style="color: #cd8b00;">26 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// print_r($temp);</span><br /><span style="color: #cd8b00;">27 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// echo "&lt;/pre&gt;";</span><br /><span style="color: #cd8b00;">28 </span> &nbsp; <br /><span style="color: #cd8b00;">29 </span> &nbsp; &nbsp;<span style="color: #ff8bff;">$textnode</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$temp</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">childNodes</span>;<br /><span style="color: #f810b0;">30 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "&lt;br/&gt;&lt;pre&gt;";</span><br /><span style="color: #cd8b00;">31 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//print_r($name);</span><br /><span style="color: #cd8b00;">32 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "&lt;/pre&gt;";</span><br /><span style="color: #cd8b00;">33 </span><br /><span style="color: #cd8b00;">34 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//查看textnode每个元素对象的详细信息。</span><br /><span style="color: #f810b0;">35 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// print_r($textnode);</span><br /><span style="color: #cd8b00;">36 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// for ($i=0; $i &lt; $textnode-&gt;length; $i++) { </span><br /><span style="color: #cd8b00;">37 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; &nbsp; echo "&lt;br/&gt;&lt;pre&gt;";</span><br /><span style="color: #cd8b00;">38 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; &nbsp; &nbsp;print_r($textnode-&gt;item($i));</span><br /><span style="color: #cd8b00;">39 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; &nbsp; echo "&lt;/pre&gt;";</span><br /><span style="color: #f810b0;">40 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">// }</span><br /><span style="color: #cd8b00;">41 </span> &nbsp; <br /><span style="color: #cd8b00;">42 </span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$textnode</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">item</span>(<span style="color: #506dbd;">0</span>)<span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">wholeText</span><span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&lt;br/&gt;'</span>;<br /><span style="color: #cd8b00;">43 </span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$textnode</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">item</span>(<span style="color: #506dbd;">0</span>)<span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">textContent</span><span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&lt;br/&gt;'</span>; <br /><span style="color: #cd8b00;">44 </span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$textnode</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">item</span>(<span style="color: #506dbd;">0</span>)<span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">nodeValue</span><span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&lt;br/&gt;'</span>;<br /><span style="color: #f810b0;">45 </span><br /><span style="color: #cd8b00;">46 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $temp-&gt;wholeText.'&lt;br/&gt;';</span><br /><span style="color: #cd8b00;">47 </span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #cfbfad;">var_dump</span>(<span style="color: #ff8bff;">$temp</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">textContent</span>)<span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&lt;br/&gt;'</span>; <br /><span style="color: #cd8b00;">48 </span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #cfbfad;">var_dump</span>(<span style="color: #ff8bff;">$temp</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">nodeValue</span>)<span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&lt;br/&gt;'</span>;<br /><span style="color: #cd8b00;">49 </span><br /><span style="color: #f810b0;">50 </span><span style="color: #409090;">?&gt;</span></div><br /><br />