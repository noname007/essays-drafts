---
title:  加班调bug谁之过？
categories:
- 职场
tags:
- 边界
description: 如何划分职责边界？
date: 2016-04-08 17:18:02
---

昨天 app 客户端出现一个问题，最后发现是使用 C# 委托和事件封装的一个 pub/sub 模式的问题。事件的发布 pub 动作 A 同时写在了构造函数中，但 B 同事写的 pub/sub 中的发布者、订阅者对象却在此后才会实例化, 导致事件无法被消费。

<!-- 为什么这样写呢？ -->
<!-- 构造函数的功能是用来初始化，一般用来解决成员变量的初始化，或者说是对外部的依赖问题 -->

这件事的责任应该划归给谁呢？ 是在构造函数里面写事件发布者的 A ，还是写 pub/sub 模式的 B？

判断这个问题，下面从这两个人的角色简单总结一下。

<!-- 问题出现在了构造函数里面，构造函数一般用来做`一些初始化的工作，像对成员变量的初值的初始化，实现依赖注入，对一些数据信息的预处理`。

这样来看到底是谁的责任，就跟代码所起的作用相关了 -->


<!-- 如果这段代码是应用和用户之间的交互相关的逻辑问题，那么很明显不该把这段事件发布相关代码写到构造函数中。 -->
像Yii2框架中继承于`Object`的类，每次类创建完成之后，就会自动执行`Object` 的 `init()` 这个函数。加上这么一层，就实现了框架的和使用人员的初始化流程给分开，防止使用框架的人在依赖到框架的时候，还未初始化情况的出现。

但是他俩情况不像是上下层调用的关系，两段都是核心处理逻辑相关的代码呢？来也只能是开发的两位成员没有协调好这个顺序问题了

<!-- 归根结底就是代码是核心基础代码，还是应用层业务逻辑代码与何时调用的问题。 -->
<!-- 
>其实他们都是开发人员，这里只是用开发与用户用来比喻一个人程序依赖另一个人的程序，比如框架的开发者就是开发人员，二使用框架的人就是用户、
 -->
<!-- 

依赖注入容器和自动加载
 -->
<!-- 要是两段都是核心处理相关的代码呢？看来也只能是开发的两个成员协调好这个顺序问题了商讨一下调用次序了 -->

