---
layout: post
title: xml学习笔记3--xml的创建
date: '2014-02-03T05:35:00.001-08:00'
author: yang zhen
tags: 
modified_time: '2014-02-03T05:36:14.602-08:00'
thumbnail: http://3.bp.blogspot.com/-c35bZZTnG8Y/Uu-XUzfn6MI/AAAAAAAAAAo/oLc9xbDANi0/s72-c/localhost-20140202-2.php.png
blogger_id: tag:blogger.com,1999:blog-398569576837287746.post-5875643302456768487
blogger_orig_url: http://hiyzz.blogspot.com/2014/02/56-google-httpblog.html
---

<div><br />先前由于一直没有注释下面这一行一直报下面的错误。</div><div><br /></div><div><span style="background-color: #1e1e27; color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">56&nbsp;</span><span style="background-color: #1e1e27; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';">&nbsp;&nbsp; &nbsp;</span><span style="background-color: #1e1e27; color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">//? &gt;&lt;?php--</span></div><div><br /></div><div><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-c35bZZTnG8Y/Uu-XUzfn6MI/AAAAAAAAAAo/oLc9xbDANi0/s1600/localhost-20140202-2.php.png" imageanchor="1"><img border="0" src="http://3.bp.blogspot.com/-c35bZZTnG8Y/Uu-XUzfn6MI/AAAAAAAAAAo/oLc9xbDANi0/s1600/localhost-20140202-2.php.png" height="100" width="740" /></a></div></div><div><br /></div><div>google以后根据<a href="http://blog.csdn.net/lilien1010/article/details/8793949">http://blog.csdn.net/lilien1010/article/details/8793949</a>，还以为是编码的错误。<a href="http://abloz.com/2011/10/13/php-sheng-cheng-xml-di-wen-ti.html">http://abloz.com/2011/10/13/php-sheng-cheng-xml-di-wen-ti.html</a>后来发现原来还是因为出现了多余的空格节点的原因。</div><div><br /><a name='more'></a><br /><br /><br /><br /></div><div><div style="background: #fdfdfd; color: black;"><u>PHP语言</u>: <a href="http://fayaa.com/code/">高亮代码由发芽网提供</a></div><div class="source" style="background-color: #1e1e27; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00;">01&nbsp;</span><span style="color: #409090;">&lt;?php</span><br /><span style="color: #cd8b00;">02&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//dom创建一个xml文档</span><br /><span style="color: #cd8b00;">03&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//1.创建dom对象</span><br /><span style="color: #cd8b00;">04&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$document_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #808bed;">new</span> <span style="color: #cfbfad;">DOMdocument</span>(<span style="background-color: #404040; color: #ffcd8b;">"1.0"</span><span style="color: #cfbfad;">,</span><span style="background-color: #404040; color: #ffcd8b;">"utf-8"</span>);<br /><span style="color: #f810b0;">05&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">06&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//2.利用dom对象中的方法创建节点和融合节点</span><br /><span style="color: #cd8b00;">07&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp;2.1.创建节点</span><br /><span style="color: #cd8b00;">08&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; 创建文本节点</span><br /><span style="color: #cd8b00;">09&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_name</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createTextNode</span>(<span style="background-color: #404040; color: #ffcd8b;">"诺基亚"</span>); &nbsp; <br /><span style="color: #f810b0;">10&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; 创建普通元素节点</span><br /><span style="color: #cd8b00;">11&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$name_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"name"</span>);<br /><span style="color: #cd8b00;">12&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">13&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; 创建文本节点</span><br /><span style="color: #cd8b00;">14&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_price</span><span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createTextNode</span>(<span style="background-color: #404040; color: #ffcd8b;">"999"</span>);<br /><span style="color: #f810b0;">15&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// 创建属性节点</span><br /><span style="color: #cd8b00;">16&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$price_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"price"</span>);<br /><span style="color: #cd8b00;">17&nbsp;</span><br /><span style="color: #cd8b00;">18&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; 创建文本节点</span><br /><span style="color: #cd8b00;">19&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_desc</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createCDATASection</span>(<span style="background-color: #404040; color: #ffcd8b;">"这是一部好手机"</span>);<br /><span style="color: #f810b0;">20&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// 创建属性节点</span><br /><span style="color: #cd8b00;">21&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$desc_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"desc"</span>);<br /><span style="color: #cd8b00;">22&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">23&nbsp;</span><br /><span style="color: #cd8b00;">24&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp;2.2.融合节点appendChild()</span><br /><span style="color: #f810b0;">25&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$name_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_name</span>);<br /><span style="color: #cd8b00;">26&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$price_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_price</span>);<br /><span style="color: #cd8b00;">27&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$desc_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_desc</span>);<br /><span style="color: #cd8b00;">28&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">29&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//</span><br /><span style="color: #f810b0;">30&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">=</span><span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"goods"</span>);<br /><span style="color: #cd8b00;">31&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_attr_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createAttribute</span>(<span style="background-color: #404040; color: #ffcd8b;">"gid"</span>);<br /><span style="color: #cd8b00;">32&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_attr_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">value</span> <span style="color: #cfbfad;">=</span> <span style="background-color: #404040; color: #ffcd8b;">"1"</span>;<br /><span style="color: #cd8b00;">33&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">34&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$goods_attr_xml</span>);<br /><span style="color: #f810b0;">35&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$name_xml</span>);<br /><span style="color: #cd8b00;">36&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$price_xml</span>);<br /><span style="color: #cd8b00;">37&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$desc_xml</span>);<br /><span style="color: #cd8b00;">38&nbsp;</span><br /><span style="color: #cd8b00;">39&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$shop_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"shop"</span>);<br /><span style="color: #f810b0;">40&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$shop_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$goods_xml</span>);<br /><span style="color: #cd8b00;">41&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">42&nbsp;</span> &nbsp; &nbsp;<span style="color: #cfbfad;">header</span>(<span style="background-color: #404040; color: #ffcd8b;">"Content-type:text/xml;charset:utf-8;"</span>);<br /><span style="color: #cd8b00;">43&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//错误的写法 </span><br /><span style="color: #cd8b00;">44&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;saveXML();</span><br /><span style="color: #f810b0;">45&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//第一种方法输出</span><br /><span style="color: #cd8b00;">46&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;saveXML($shop_xml);</span><br /><span style="color: #cd8b00;">47&nbsp;</span><br /><span style="color: #cd8b00;">48&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">// 第二种方法输出.xml</span><br /><span style="color: #cd8b00;">49&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//$document_xml-&gt;appendChild($shop_xml);</span><br /><span style="color: #f810b0;">50&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;saveXML();</span><br /><span style="color: #cd8b00;">51&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;saveXML($name_xml);从$name_xml节点开始输出</span><br /><span style="color: #cd8b00;">52&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;saveXML($document_xml);</span><br /><span style="color: #cd8b00;">53&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;save("generate_02.xml")?"OK":"NO";</span><br /><span style="color: #cd8b00;">54&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $document_xml-&gt;save("generate_02.xml");</span><br /><span style="color: #f810b0;">55&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">56&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//? &gt;&lt;?php--</span><br /><span style="color: #cd8b00;">57&nbsp;</span><br /><span style="color: #cd8b00;">58&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_name</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createTextNode</span>(<span style="background-color: #404040; color: #ffcd8b;">"天龙八部"</span>); &nbsp; <br /><span style="color: #cd8b00;">59&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$name_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"name"</span>);<br /><span style="color: #f810b0;">60&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_price</span><span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createTextNode</span>(<span style="background-color: #404040; color: #ffcd8b;">"12.3"</span>);<br /><span style="color: #cd8b00;">61&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$price_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"price"</span>);<br /><span style="color: #cd8b00;">62&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$text_xml_desc</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createCDATASection</span>(<span style="background-color: #404040; color: #ffcd8b;">"这是一本好书,&gt;10000人在读"</span>);<br /><span style="color: #cd8b00;">63&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$desc_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"desc"</span>);<br /><span style="color: #cd8b00;">64&nbsp;</span><br /><span style="color: #f810b0;">65&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$name_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_name</span>);<br /><span style="color: #cd8b00;">66&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$price_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_price</span>);<br /><span style="color: #cd8b00;">67&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$desc_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$text_xml_desc</span>);<br /><span style="color: #cd8b00;">68&nbsp;</span><br /><span style="color: #cd8b00;">69&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">=</span><span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createElement</span>(<span style="background-color: #404040; color: #ffcd8b;">"goods"</span>);<br /><span style="color: #f810b0;">70&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_attr_xml</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">createAttribute</span>(<span style="background-color: #404040; color: #ffcd8b;">"gid"</span>);<br /><span style="color: #cd8b00;">71&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_attr_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">value</span> <span style="color: #cfbfad;">=</span> <span style="background-color: #404040; color: #ffcd8b;">"0"</span>;<br /><span style="color: #cd8b00;">72&nbsp;</span> &nbsp; <br /><span style="color: #cd8b00;">73&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$goods_attr_xml</span>);<br /><span style="color: #cd8b00;">74&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$name_xml</span>);<br /><span style="color: #f810b0;">75&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$price_xml</span>);<br /><span style="color: #cd8b00;">76&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$goods_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$desc_xml</span>);<br /><span style="color: #cd8b00;">77&nbsp;</span><br /><span style="color: #cd8b00;">78&nbsp;</span> &nbsp; &nbsp;<span style="color: #cd8b00;">//$shop_xml = $document_xml-&gt;createElement("shop");</span><br /><span style="color: #cd8b00;">79&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$shop_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$goods_xml</span>);<br /><span style="color: #f810b0;">80&nbsp;</span><br /><span style="color: #cd8b00;">81&nbsp;</span> &nbsp; &nbsp;<span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">appendChild</span>(<span style="color: #ff8bff;">$shop_xml</span>);<br /><span style="color: #cd8b00;">82&nbsp;</span><br /><span style="color: #cd8b00;">83&nbsp;</span> &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$document_xml</span><span style="color: #cfbfad;">-&gt;</span><span style="color: #cfbfad;">saveXML</span>(<span style="color: #ff8bff;">$document_xml</span>);<br /><span style="color: #cd8b00;">84&nbsp;</span><br /><span style="color: #f810b0;">85&nbsp;</span><br /><span style="color: #cd8b00;">86&nbsp;</span><span style="color: #409090;">?&gt;</span></div><br /><br /><br /><br /></div>