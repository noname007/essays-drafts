---
layout: post
title: xml学习笔记-1
date: '2014-02-01T06:29:00.000-08:00'
author: yang zhen
tags:
- 总结
- 学习
- php
- 笔记
modified_time: '2014-02-01T06:33:11.898-08:00'
blogger_id: tag:blogger.com,1999:blog-398569576837287746.post-2417685154536265719
blogger_orig_url: http://hiyzz.blogspot.com/2014/02/xml-1.html
---

<br />&nbsp; &nbsp; 看xml感觉特别爽，全是数据的集合，样式这些噪声影响非常小，感觉达到了短小精悍的地步。顺便打下广告吧，我学的xml是是看的<a href="http://www.zixue.it/">自学it网</a>的xml教程，感觉教的挺好的。<br /><br />&nbsp; &nbsp; 下面的代码就是仿照视频课程里面的写的（基本上照抄的~__~），也算是复习吧。本来想着也把优酷的搞一下的。没想到file_get_contents();无法获取想要的内容老提示错误。也就先放一放了。<br /><br /><h3>&nbsp; &nbsp;知识点的复习：</h3><h3>&nbsp; &nbsp;1.xml的获取</h3><div>&nbsp; &nbsp; 土豆视频的xml获取方法，在视频里讲的非常的清楚。但是因为时间的原因还是有一些不同的地方的。但基本上还是相同的。首先在开放平台注册账号，完善开发者信息，创建应用。稍微复杂了一些，即使还没有通过验证，但是也能先用key。</div><h3>&nbsp; &nbsp;2.php</h3><div>&nbsp; &nbsp; 在这个实例中php用到的地方主要是操作字符串，主要包括字符串的<a href="http://cn2.php.net/manual/en/function.substr.php" target="_blank">截取substr()</a>;、粘连(.)、查找模式串在字符串的起始位置<a href="http://cn2.php.net/manual/zh/function.strpos.php" target="_blank">strpos()</a>。整个过程也用到了其他的一些函数如isset(),empty()，和在调试的时候用到了var_dump(),print_r, echo等等。<br />&nbsp; &nbsp; &nbsp;empty()和isset()的区别.用<a href="http://cn2.php.net/manual/en/function.empty.php" target="_blank">empty</a>判断变量是否存在(exsit)或者是否是false,isset()用来判断变量是否存在（set）或者是否是NULL。我感觉他们俩的主要区别是在后者，在前者判断变量是否存在，很难说出有什么不同（英文文档中一个用exist，一个用set我将其都理解为存在的意思）。</div><h4>&nbsp; &nbsp; 3.javascript</h4><div style="background-color: black; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00;">57 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&gt;土豆开放平台appkey:&lt;input type="text" name="key" onfocus="this.value=''" value="</span><span style="color: #409090;">&lt;?php</span> <span style="color: #808bed;">if</span>(<span style="color: #cfbfad;">isset</span>(<span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'key'</span><span style="color: #cfbfad;">]))</span> &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'key'</span><span style="color: #cfbfad;">];</span> <span style="color: #808bed;">else</span> <span style="color: #808bed;">echo</span> <span style="background-color: #404040; color: #ffcd8b;">'d07a99702d923952'</span>;<span style="color: #409090;">?&gt;</span><span style="color: #cfbfad;">" /&gt;&lt;/span&gt;</span></div><h4>&nbsp; &nbsp; 4.HTML</h4><div style="background-color: black; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">26&nbsp;</span><span style="color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';">&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">//&lt;pre&gt;</span><br /><div style="color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00;">27&nbsp;</span>&nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; &nbsp;fadfad&lt;div&gt;&lt;/div&gt;</span></div><span style="color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">28&nbsp;</span><span style="color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';">&nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: #cd8b00; font-family: Consolas, 'Lucida Console', 'Courier New';">//&lt;/pre&gt;</span>&nbsp;</div><br /><br />&nbsp; <br /><br /><a name='more'></a><h3>所有的源码</h3><div style="background: #fdfdfd; color: black;"><u>PHP语言</u>: <a href="http://fayaa.com/code/">高亮代码由发芽网提供</a></div><div class="source" style="background-color: black; color: #cfbfad; font-family: Consolas, 'Lucida Console', 'Courier New';"><span style="color: #cd8b00;">01 </span><span style="color: #409090;">&lt;?php</span><br /><span style="color: #cd8b00;">02 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">/*</span><br /><span style="color: #cd8b00;">03 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;获取土头和优酷视频的播放地址</span><br /><span style="color: #cd8b00;">04 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;*/</span><br /><span style="color: #f810b0;">05 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "string";</span><br /><span style="color: #cd8b00;">06 </span> &nbsp; &nbsp;<span style="color: #cfbfad;">var_dump</span>(<span style="color: #ff8bff;">$_POST</span>);<br /><span style="color: #cd8b00;">07 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">///*</span><br /><span style="color: #cd8b00;">08 </span> &nbsp; &nbsp;<span style="color: #808bed;">if</span>(<span style="color: #cfbfad;">isset</span>(<span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">"tudou"</span><span style="color: #cfbfad;">])){</span><br /><span style="color: #cd8b00;">09 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "yes";</span><br /><span style="color: #f810b0;">10 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$url</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">"tudou"</span><span style="color: #cfbfad;">];</span><br /><span style="color: #cd8b00;">11 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//http://www.tudou.com/programs/view/YRITBqGAmRM/</span><br /><span style="color: #cd8b00;">12 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$itemcode</span> <span style="color: #cfbfad;">=</span> <span style="color: #cfbfad;">basename</span>(<span style="color: #ff8bff;">$url</span>); <span style="color: #cd8b00;">//</span><br /><span style="color: #cd8b00;">13 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $itemcode;</span><br /><span style="color: #cd8b00;">14 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$myAppKey</span> <span style="color: #cfbfad;">=</span> <span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'key'</span><span style="color: #cfbfad;">];</span><br /><span style="color: #f810b0;">15 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$api</span> <span style="color: #cfbfad;">=</span> <span style="background-color: #404040; color: #ffcd8b;">'http://api.tudou.com/v6/video/info?app_key='</span><span style="color: #cfbfad;">.</span><span style="color: #ff8bff;">$myAppKey</span><span style="color: #cfbfad;">.</span><span style="background-color: #404040; color: #ffcd8b;">'&amp;format=xml&amp;itemCodes='</span><span style="color: #cfbfad;">.</span><span style="color: #ff8bff;">$itemcode</span>;<br /><span style="color: #cd8b00;">16 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$con</span> <span style="color: #cfbfad;">=</span> <span style="color: #cfbfad;">file_get_contents</span>(<span style="color: #ff8bff;">$api</span>);<br /><span style="color: #cd8b00;">17 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$start</span> <span style="color: #cfbfad;">=</span> <span style="color: #cfbfad;">strpos</span>(<span style="color: #ff8bff;">$con</span><span style="color: #cfbfad;">,</span><span style="background-color: #404040; color: #ffcd8b;">"&lt;outerPlayerUrl&gt;"</span>)<span style="color: #cfbfad;">+</span><span style="color: #506dbd;">16</span>;<br /><span style="color: #cd8b00;">18 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$length</span> <span style="color: #cfbfad;">=</span> <span style="color: #cfbfad;">strpos</span>(<span style="color: #ff8bff;">$con</span><span style="color: #cfbfad;">,</span><span style="background-color: #404040; color: #ffcd8b;">"&lt;/outerPlayerUrl&gt;"</span>) <span style="color: #cfbfad;">-</span> <span style="color: #ff8bff;">$start</span>;<br /><span style="color: #cd8b00;">19 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $start ,$length;</span><br /><span style="color: #f810b0;">20 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #ff8bff;">$swf</span> <span style="color: #cfbfad;">=</span> <span style="color: #cfbfad;">substr</span>(<span style="color: #ff8bff;">$con</span><span style="color: #cfbfad;">,</span> <span style="color: #ff8bff;">$start</span><span style="color: #cfbfad;">,</span><span style="color: #ff8bff;">$length</span>);<br /><span style="color: #cd8b00;">21 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $swf;</span><br /><span style="color: #cd8b00;">22 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//var_dump($swf);</span><br /><span style="color: #cd8b00;">23 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo $con; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><br /><span style="color: #cd8b00;">24 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//print_r($con) ;</span><br /><span style="color: #f810b0;">25 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//&lt;pre&gt;contents &lt;/pre&gt; content中的标签不会被显示出来。</span><br /><span style="color: #cd8b00;">26 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//&lt;pre&gt;</span><br /><span style="color: #cd8b00;">27 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">// &nbsp; &nbsp;fadfad&lt;div&gt;&lt;/div&gt; </span><br /><span style="color: #cd8b00;">28 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//&lt;/pre&gt;</span><br /><span style="color: #cd8b00;">29 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//&lt;div&gt;还是会被解析，不会显示出字符fadfad&lt;div&gt;&lt;/div&gt;而只会显示出字符fadfad</span><br /><span style="color: #f810b0;">30 </span> &nbsp; <br /><span style="color: #cd8b00;">31 </span> &nbsp; &nbsp;<span style="color: #cfbfad;">}</span><span style="color: #cd8b00;">//else{</span><br /><span style="color: #cd8b00;">32 </span> &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "no";</span><br /><span style="color: #cd8b00;">33 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//}</span><br /><span style="color: #cd8b00;">34 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">//*/</span><br /><span style="color: #f810b0;">35 </span> &nbsp; &nbsp;<span style="color: #cd8b00;">/*</span><br /><span style="color: #cd8b00;">36 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;if(isset($_POST["youku"]))</span><br /><span style="color: #cd8b00;">37 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;{</span><br /><span style="color: #cd8b00;">38 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;$itemcode_y = substr(basename($_POST["youku"]),3,-5);</span><br /><span style="color: #cd8b00;">39 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;//http://v.youku.com/v_show/id_XNjY1NTE1MTg4.html</span><br /><span style="color: #f810b0;">40 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;echo $itemcode_y."&lt;br/&gt;";</span><br /><span style="color: #cd8b00;">41 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;$api = 'http://openapi.youku.com/v2/videos/show_basic.json?client_id=fa38ffda4fd2f01a&amp;video_id='.$itemcode_y;</span><br /><span style="color: #cd8b00;">42 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;echo $api;</span><br /><span style="color: #cd8b00;">43 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;//$con_y = file_get_contents(urlencode($api));</span><br /><span style="color: #cd8b00;">44 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;$con_y = file_get_contents($api);</span><br /><span style="color: #f810b0;">45 </span><span style="color: #cd8b00;"> &nbsp; &nbsp; &nbsp; &nbsp;//$swf_y = substr(string, start);</span><br /><span style="color: #cd8b00;">46 </span><span style="color: #cd8b00;"> &nbsp; &nbsp;}*/</span><br /><span style="color: #cd8b00;">47 </span><span style="color: #409090;">?&gt;</span><br /><span style="color: #cd8b00;">48 </span><br /><span style="color: #cd8b00;">49 </span><span style="color: #cfbfad;">&lt;html&gt;</span><br /><span style="color: #f810b0;">50 </span><span style="color: #cfbfad;"> &nbsp; &nbsp;&lt;head&gt;</span><br /><span style="color: #cd8b00;">51 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;title&gt;查看视频源地址&lt;/title&gt;</span><br /><span style="color: #cd8b00;">52 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;meta charset = "utf-8"/&gt;</span><br /><span style="color: #cd8b00;">53 </span><span style="color: #cfbfad;"> &nbsp; &nbsp;&lt;/head&gt;</span><br /><span style="color: #cd8b00;">54 </span><span style="color: #cfbfad;"> &nbsp; &nbsp;&lt;body&gt;</span><br /><span style="color: #f810b0;">55 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;form method="post"&gt;</span><br /><span style="color: #cd8b00;">56 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;p&gt;</span><br /><span style="color: #cd8b00;">57 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&gt;土豆开放平台appkey:&lt;input type="text" name="key" onfocus="this.value=''" value="</span><span style="color: #409090;">&lt;?php</span> <span style="color: #808bed;">if</span>(<span style="color: #cfbfad;">isset</span>(<span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'key'</span><span style="color: #cfbfad;">]))</span> &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'key'</span><span style="color: #cfbfad;">];</span> <span style="color: #808bed;">else</span> <span style="color: #808bed;">echo</span> <span style="background-color: #404040; color: #ffcd8b;">'d07a99702d923952'</span>;<span style="color: #409090;">?&gt;</span><span style="color: #cfbfad;">" /&gt;&lt;/span&gt;</span><br /><span style="color: #cd8b00;">58 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;br/&gt;&lt;br/&gt;</span><br /><span style="color: #cd8b00;">59 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;span&gt;土豆视频网页url:&lt;input type="text" name="tudou" onfocus="this.value = ''" value="</span><span style="color: #409090;">&lt;?php</span> <span style="color: #808bed;">if</span>(<span style="color: #cfbfad;">isset</span>(<span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'tudou'</span><span style="color: #cfbfad;">]))</span> <span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">'tudou'</span><span style="color: #cfbfad;">];</span> <span style="color: #409090;">?&gt;</span><span style="color: #cfbfad;">" /&gt; &lt;/span&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><br /><span style="color: #f810b0;">60 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/p&gt;</span><br /><span style="color: #cd8b00;">61 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;!--&lt;p&gt;</span><br /><span style="color: #cd8b00;">62 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;优酷视频网页url&lt;input type="text" name="youku" value="" /&gt;</span><br /><span style="color: #cd8b00;">63 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;/p&gt;--&gt;</span><br /><span style="color: #cd8b00;">64 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;input type="submit" value= "查看视频源地址"&gt; &nbsp; &nbsp;</span><br /><span style="color: #f810b0;">65 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/form&gt;</span><br /><span style="color: #cd8b00;">66 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;p&gt;</span><br /><span style="color: #cd8b00;">67 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;视频源地址：</span><br /><span style="color: #cd8b00;">68 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #409090;">&lt;?php</span> <br /><span style="color: #cd8b00;">69 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "&lt;pre&gt;".$con."&lt;/pre&gt;"; </span><br /><span style="color: #f810b0;">70 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808bed;">if</span>(<span style="color: #cfbfad;">!</span><span style="color: #808bed;">empty</span>(<span style="color: #ff8bff;">$_POST</span><span style="color: #cfbfad;">[</span><span style="background-color: #404040; color: #ffcd8b;">"tudou"</span><span style="color: #cfbfad;">]))</span><br /><span style="color: #cd8b00;">71 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #808bed;">echo</span> <span style="color: #ff8bff;">$swf</span>;<br /><span style="color: #cd8b00;">72 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #cd8b00;">//echo "empty(var)";</span><br /><span style="color: #cd8b00;">73 </span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style="color: #409090;">?&gt;</span><br /><span style="color: #cd8b00;">74 </span><span style="color: #cfbfad;"> &nbsp; &nbsp; &nbsp; &nbsp;&lt;/p&gt;</span><br /><span style="color: #f810b0;">75 </span><span style="color: #cfbfad;"> &nbsp; &nbsp;&lt;/body&gt;</span><br /><span style="color: #cd8b00;">76 </span><br /><span style="color: #cd8b00;">77 </span><span style="color: #cfbfad;">&lt;/html&gt;</span></div><br /><br /><br /><br /><br /><br /><br />